{"ast":null,"code":"var _jsxFileName = \"/Users/beydasoyseven/Documents/GitHub/web-halisaha/src/Components/DetailCard/DetailCard.js\",\n    _s = $RefreshSig$();\n\nimport \"./DetailCard.css\";\nimport { Button, Card, CardActions, CardContent, CardHeader, Checkbox, FormControlLabel } from \"@mui/material\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useState } from \"react\";\nimport { authAction } from \"../../Store/Auth/AuthSlice\";\nimport { initialBookingData } from \"../../Store/data\";\nimport * as emailjs from \"@emailjs/browser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DetailCard = props => {\n  _s();\n\n  const id = useSelector(state => state.auth.auth.userID);\n  const user = useSelector(state => state.auth.user.array).filter(x => {\n    return x.userId === id;\n  });\n  const bookCount = useSelector(state => state.auth.booking.count);\n  const booking = useSelector(state => state.auth.booking.array).filter(x => {\n    return x.userID === id && props.field.fieldID === x.fieldID;\n  });\n  let tempArray = [];\n  let tempSelectedArray = [];\n\n  for (let i = props.field.openTime; i < props.field.closeTime; i += props.field.minGameTime) {\n    tempArray.push(i);\n    tempSelectedArray.push(false);\n  }\n\n  const [timeArray, setTimeArray] = useState(tempArray);\n  const [selectedTime, setSelectedArray] = useState(tempSelectedArray);\n\n  const timeLineHandler = (event, index) => {\n    let array = [...selectedTime];\n    array[index] = event.target.checked;\n    setSelectedArray(array);\n  };\n\n  const sendEmail = e => {\n    e.preventDefault();\n    console.log(user.email);\n    var templateParams = {\n      email: user.email,\n      time: timeArray.filter((x, index) => {\n        return selectedTime[index];\n      }).map(x => {\n        return Math.floor(x / 60) + \":\" + x % 60 + \" \";\n      })\n    };\n    emailjs.send('service_j9nrqrc', 'template_aigipmo', templateParams, \"v9zF0aEjhnBqKpvmI\").then(function (response) {\n      console.log('SUCCESS!', response.status, response.text);\n    }, function (error) {\n      console.log('FAILED...', error);\n    });\n  };\n\n  const dispatch = useDispatch();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Detail-Card\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        width: \"30%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        title: \"Details\",\n        subheader: props.field.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: [\"Total Price: \", props.field.price * selectedTime.filter(x => {\n          return x;\n        }).length, \" .TL\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n        sx: {\n          width: \"100%\",\n          maxHeight: \"40%\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          overflowY: \"scroll\",\n          textAlign: \"left\"\n        },\n        children: timeArray.map((x, index) => {\n          let flag = false;\n\n          for (let i = 0; i < booking.length; i++) {\n            if (booking[i].times.includes(x)) {\n              flag = true;\n              break;\n            }\n          }\n\n          return /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            disabled: flag,\n            label: Math.floor(x / 60) + \".\" + x % 60 + \"/\" + Math.floor((x + props.field.minGameTime) / 60) + \".\" + (x + props.field.minGameTime) % 60,\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              checked: selectedTime[index],\n              onChange: event => {\n                timeLineHandler(event, index);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 37\n            }, this)\n          }, \"time:\" + index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n        sx: {\n          display: \"flex\",\n          justifyContent: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          sx: {\n            bgcolor: \"rgba(5,184,34,255)\"\n          },\n          variant: \"contained\",\n          onClick: event => {\n            let book = { ...initialBookingData\n            };\n            book.bookID = bookCount;\n            book.fieldID = props.field.fieldID;\n            book.userID = id;\n            book.times = timeArray.filter((x, index) => {\n              return selectedTime[index];\n            });\n            book.price = book.times.length * props.field.price;\n            dispatch(authAction.addBooking(book));\n            sendEmail(event);\n            props.select(false);\n          },\n          children: \" Reserve \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          sx: {\n            bgcolor: \"rgba(5,184,34,255)\"\n          },\n          variant: \"contained\",\n          onClick: e => {\n            props.select(false);\n          },\n          children: \" Cancel \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DetailCard, \"UQd9XXsL5BB7p3sByhapfVCtgIY=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = DetailCard;\nexport default DetailCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"DetailCard\");","map":{"version":3,"names":["Button","Card","CardActions","CardContent","CardHeader","Checkbox","FormControlLabel","useDispatch","useSelector","useState","authAction","initialBookingData","emailjs","DetailCard","props","id","state","auth","userID","user","array","filter","x","userId","bookCount","booking","count","field","fieldID","tempArray","tempSelectedArray","i","openTime","closeTime","minGameTime","push","timeArray","setTimeArray","selectedTime","setSelectedArray","timeLineHandler","event","index","target","checked","sendEmail","e","preventDefault","console","log","email","templateParams","time","map","Math","floor","send","then","response","status","text","error","dispatch","width","name","price","length","maxHeight","display","flexDirection","overflowY","textAlign","flag","times","includes","justifyContent","bgcolor","book","bookID","addBooking","select"],"sources":["/Users/beydasoyseven/Documents/GitHub/web-halisaha/src/Components/DetailCard/DetailCard.js"],"sourcesContent":["import \"./DetailCard.css\"\nimport {Button, Card, CardActions, CardContent, CardHeader, Checkbox, FormControlLabel} from \"@mui/material\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {useState} from \"react\";\nimport {authAction} from \"../../Store/Auth/AuthSlice\";\nimport {initialBookingData} from \"../../Store/data\";\nimport * as emailjs from \"@emailjs/browser\";\n\nconst DetailCard = (props) => {\n    const id = useSelector(state => state.auth.auth.userID);\n    const user = useSelector(state => state.auth.user.array).filter((x)=>{\n        return(x.userId === id);\n    })\n    const bookCount = useSelector(state => state.auth.booking.count);\n    const booking = useSelector(state => state.auth.booking.array).filter((x)=>{\n        return (x.userID === id && props.field.fieldID === x.fieldID);\n    });\n\n    let tempArray = [];\n    let tempSelectedArray = [];\n    for (let i = props.field.openTime; i < props.field.closeTime; i+=props.field.minGameTime) {\n        tempArray.push(i);\n        tempSelectedArray.push(false);\n    }\n    const [timeArray, setTimeArray] = useState(tempArray);\n\n    const [selectedTime, setSelectedArray] = useState(tempSelectedArray);\n\n    const timeLineHandler = (event, index) => {\n        let array = [...selectedTime];\n        array[index] = event.target.checked;\n        setSelectedArray(array);\n    }\n\n    const sendEmail = (e) => {\n        e.preventDefault();\n        console.log(user.email);\n        var templateParams = {\n            email: user.email,\n            time: timeArray.filter((x, index)=>{\n                return (selectedTime[index]);\n            }).map((x)=>{\n                return (Math.floor(x/60))+\":\"+ x%60 + \" \";\n            })\n        };\n\n        emailjs.send('service_j9nrqrc', 'template_aigipmo', templateParams, \"v9zF0aEjhnBqKpvmI\")\n            .then(function(response) {\n                console.log('SUCCESS!', response.status, response.text);\n            }, function(error) {\n                console.log('FAILED...', error);\n            });\n    };\n\n    const dispatch = useDispatch();\n\n    return (\n        <div className={\"Detail-Card\"}>\n            <Card sx={{width:\"30%\"}}>\n                <CardHeader\n                    title={\"Details\"}\n                    subheader={props.field.name}\n                />\n                <CardContent>\n                    Total Price: {props.field.price * selectedTime.filter((x)=>{\n                        return x\n                }).length} .TL\n                </CardContent>\n                <CardActions sx={{\n                    width:\"100%\",\n                    maxHeight:\"40%\",\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    overflowY: \"scroll\",\n                    textAlign:\"left\"\n                }}>\n                    {\n                        timeArray.map((x, index)=>{\n                            let flag = false;\n                            for (let i = 0; i < booking.length; i++) {\n                                 if (booking[i].times.includes(x)){\n                                     flag = true;\n                                     break;\n                                 }\n                            }\n                            return(\n                                <FormControlLabel\n                                    key={\"time:\"+index}\n                                    disabled={flag}\n                                    label= {Math.floor(x/60) + \".\" + x%60 + \"/\" + Math.floor((x+props.field.minGameTime)/60) + \".\" + (x+props.field.minGameTime)%60}\n                                    control={\n                                    <Checkbox checked={selectedTime[index]} onChange={(event)=>{\n                                        timeLineHandler(event, index);\n                                    }}/>}\n                                />\n                            )\n                        })\n                    }\n                </CardActions>\n                <CardActions\n                    sx={{display:\"flex\",justifyContent:\"center\"}}\n                >\n                    <Button\n                    sx={{bgcolor:\"rgba(5,184,34,255)\"}}\n                        variant={\"contained\"} onClick={\n                        (event)=>{\n                            let book = {...initialBookingData}\n                            book.bookID = bookCount;\n                            book.fieldID = props.field.fieldID;\n                            book.userID = id;\n                            book.times = timeArray.filter((x, index)=>{\n                                return (selectedTime[index]);\n                            })\n                            book.price = book.times.length * props.field.price;\n                            dispatch(authAction.addBooking(book));\n                            sendEmail(event);\n                            props.select(false);\n                        }\n                    }> Reserve </Button>\n                    <Button\n                        sx={{bgcolor:\"rgba(5,184,34,255)\"}}\n                        variant={\"contained\"}\n                            onClick={(e)=>{\n                                props.select(false);\n                            }}\n                    > Cancel </Button>\n                </CardActions>\n            </Card>\n        </div>\n    );\n}\n\nexport default DetailCard;"],"mappings":"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"},"metadata":{},"sourceType":"module"}